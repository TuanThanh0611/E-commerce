import './polyfills.server.mjs';
import{$ as ut,Ba as ht,H as Ft,Ha as A,Ia as q,J as Mt,Ja as xt,Jb as kt,Kb as Ut,L as E,O as Qt,Qa as At,S as T,Sb as Kt,T as Et,Ta as k,Tb as Lt,Ua as W,Wa as qt,Y as J,Z as at,ab as Tt,ba as Dt,cb as jt,eb as lt,fb as ft,hc as Nt,na as It,oa as j,ua as ct,vb as X,wb as U,xb as dt}from"./chunk-FETEQ4OZ.mjs";import{a as o,b as f,d as Z,h as I}from"./chunk-5XUXGTUW.mjs";var Y=t=>{let e=new Kt;return e=e.append("page",t.page).append("size",t.size),t.sort.forEach(s=>{e=e.append("sort",s)}),e};var K={kinde:{authority:"https://codecake.kinde.com",redirectUrl:"http://localhost:4200",postLogoutRedirectUri:"http://localhost:4200",clientId:"6fdd361c3e904636b5095d48ef96c132",audience:"http://localhost:8080/api"},apiUrl:"http://localhost:8080/api",stripePublishableKey:"pk_test_51PqP6gFxB2dnnKdDhiB1cqZyvA0X1Si7ggeltnoO0OxXVRVMr35Lk8Z1UpsgbzjyawMNIpGlaB91S72uhbGvPpyJ00H5Zy8La7"};var Te=(()=>{class t{http=E(Lt);findAllFeaturedProducts(s){let i=Y(s);return this.http.get(`${K.apiUrl}/products-shop/featured`,{params:i})}findOneByPublicId(s){return this.http.get(`${K.apiUrl}/products-shop/find-one`,{params:{publicId:s}})}findRelatedProduct(s,i){let r=Y(s);return r=r.append("publicId",i),this.http.get(`${K.apiUrl}/products-shop/related`,{params:r})}findAllCategories(){return this.http.get(`${K.apiUrl}/categories`)}filter(s,i){let r=Y(s);return i.category&&(r=r.append("categoryId",i.category)),i.size&&(r=r.append("productSizes",i.size)),this.http.get(`${K.apiUrl}/products-shop/filter`,{params:r})}static \u0275fac=function(i){return new(i||t)};static \u0275prov=Ft({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var R=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}};var Q=typeof window>"u"||"Deno"in globalThis;function S(){}function Bt(t,e){return typeof t=="function"?t(e):t}function _(t){return typeof t=="number"&&t>=0&&t!==1/0}function et(t,e){return Math.max(t+(e||0)-Date.now(),0)}function x(t,e){return typeof t=="function"?t(e):t}function P(t,e){return typeof t=="function"?t(e):t}function yt(t,e){let{type:s="all",exact:i,fetchStatus:r,predicate:n,queryKey:c,stale:a}=t;if(c){if(i){if(e.queryHash!==G(c,e.options))return!1}else if(!L(e.queryKey,c))return!1}if(s!=="all"){let l=e.isActive();if(s==="active"&&!l||s==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||r&&r!==e.state.fetchStatus||n&&!n(e))}function mt(t,e){let{exact:s,status:i,predicate:r,mutationKey:n}=t;if(n){if(!e.options.mutationKey)return!1;if(s){if(D(e.options.mutationKey)!==D(n))return!1}else if(!L(e.options.mutationKey,n))return!1}return!(i&&e.state.status!==i||r&&!r(e))}function G(t,e){return(e?.queryKeyHashFn||D)(t)}function D(t){return JSON.stringify(t,(e,s)=>pt(s)?Object.keys(s).sort().reduce((i,r)=>(i[r]=s[r],i),{}):s)}function L(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(s=>!L(t[s],e[s])):!1}function vt(t,e){if(t===e)return t;let s=Ht(t)&&Ht(e);if(s||pt(t)&&pt(e)){let i=s?t:Object.keys(t),r=i.length,n=s?e:Object.keys(e),c=n.length,a=s?[]:{},l=0;for(let p=0;p<c;p++){let u=s?p:n[p];(!s&&i.includes(u)||s)&&t[u]===void 0&&e[u]===void 0?(a[u]=void 0,l++):(a[u]=vt(t[u],e[u]),a[u]===t[u]&&t[u]!==void 0&&l++)}return r===c&&l===r?t:a}return e}function N(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(let s in t)if(t[s]!==e[s])return!1;return!0}function Ht(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function pt(t){if(!zt(t))return!1;let e=t.constructor;if(e===void 0)return!0;let s=e.prototype;return!(!zt(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function zt(t){return Object.prototype.toString.call(t)==="[object Object]"}function _t(t){return new Promise(e=>{setTimeout(e,t)})}function V(t,e,s){if(typeof s.structuralSharing=="function")return s.structuralSharing(t,e);if(s.structuralSharing!==!1){if(process.env.NODE_ENV!=="production")try{JSON.stringify(t),JSON.stringify(e)}catch(i){console.error(`StructuralSharing requires data to be JSON serializable. To fix this, turn off structuralSharing or return JSON-serializable data from your queryFn. [${s.queryHash}]: ${i}`)}return vt(t,e)}return e}function Gt(t,e,s=0){let i=[...t,e];return s&&i.length>s?i.slice(1):i}function Vt(t,e,s=0){let i=[e,...t];return s&&i.length>s?i.slice(0,-1):i}var tt=Symbol();function st(t,e){return process.env.NODE_ENV!=="production"&&t.queryFn===tt&&console.error(`Attempted to invoke queryFn when set to skipToken. This is likely a configuration error. Query hash: '${t.queryHash}'`),!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===tt?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var he=class extends R{#t;#e;#i;constructor(){super(),this.#i=t=>{if(!Q&&window.addEventListener){let e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#e||this.setEventListener(this.#i)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(t){this.#i=t,this.#e?.(),this.#e=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#t!==t&&(this.#t=t,this.onFocus())}onFocus(){let t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},H=new he;var le=class extends R{#t=!0;#e;#i;constructor(){super(),this.#i=t=>{if(!Q&&window.addEventListener){let e=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",s)}}}}onSubscribe(){this.#e||this.setEventListener(this.#i)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(t){this.#i=t,this.#e?.(),this.#e=t(this.setOnline.bind(this))}setOnline(t){this.#t!==t&&(this.#t=t,this.listeners.forEach(s=>{s(t)}))}isOnline(){return this.#t}},z=new le;function fe(t){return Math.min(1e3*2**t,3e4)}function bt(t){return(t??"online")==="online"?z.isOnline():!0}var $t=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function it(t){return t instanceof $t}function rt(t){let e=!1,s=0,i=!1,r,n,c,a=new Promise((y,F)=>{n=y,c=F}),l=y=>{i||(g(new $t(y)),t.abort?.())},p=()=>{e=!0},u=()=>{e=!1},v=()=>H.isFocused()&&(t.networkMode==="always"||z.isOnline())&&t.canRun(),h=()=>bt(t.networkMode)&&t.canRun(),b=y=>{i||(i=!0,t.onSuccess?.(y),r?.(),n(y))},g=y=>{i||(i=!0,t.onError?.(y),r?.(),c(y))},m=()=>new Promise(y=>{r=F=>{(i||v())&&y(F)},t.onPause?.()}).then(()=>{r=void 0,i||t.onContinue?.()}),O=()=>{if(i)return;let y,F=s===0?t.initialPromise:void 0;try{y=F??t.fn()}catch(C){y=Promise.reject(C)}Promise.resolve(y).then(b).catch(C=>{if(i)return;let M=t.retry??(Q?0:3),$=t.retryDelay??fe,w=typeof $=="function"?$(s,C):$,B=M===!0||typeof M=="number"&&s<M||typeof M=="function"&&M(s,C);if(e||!B){g(C);return}s++,t.onFail?.(s,C),_t(w).then(()=>v()?void 0:m()).then(()=>{e?g(C):O()})})};return{promise:a,cancel:l,continue:()=>(r?.(),a),cancelRetry:p,continueRetry:u,canStart:h,start:()=>(h()?O():m().then(O),a)}}function de(){let t=[],e=0,s=h=>{h()},i=h=>{h()},r=h=>setTimeout(h,0),n=h=>{r=h},c=h=>{let b;e++;try{b=h()}finally{e--,e||p()}return b},a=h=>{e?t.push(h):r(()=>{s(h)})},l=h=>(...b)=>{a(()=>{h(...b)})},p=()=>{let h=t;t=[],h.length&&r(()=>{i(()=>{h.forEach(b=>{s(b)})})})};return{batch:c,batchCalls:l,schedule:a,setNotifyFunction:h=>{s=h},setBatchNotifyFunction:h=>{i=h},setScheduler:n}}var d=de();var nt=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),_(this.gcTime)&&(this.#t=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Q?1/0:5*60*1e3))}clearGcTimeout(){this.#t&&(clearTimeout(this.#t),this.#t=void 0)}};var Zt=class extends nt{#t;#e;#i;#s;#o;#n;constructor(t){super(),this.#n=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#i=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#t=pe(this.options),this.state=t.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(t){this.options=o(o({},this.#o),t),this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#i.remove(this)}setData(t,e){let s=V(this.state.data,t,this.options);return this.#r({data:s,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),s}setState(t,e){this.#r({type:"setState",state:t,setStateOptions:e})}cancel(t){let e=this.#s?.promise;return this.#s?.cancel(t),e?e.then(S).catch(S):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(t=>P(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!et(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#i.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#s&&(this.#n?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#i.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#r({type:"invalidate"})}fetch(t,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(t&&this.setOptions(t),!this.options.queryFn){let a=this.observers.find(l=>l.options.queryFn);a&&this.setOptions(a.options)}process.env.NODE_ENV!=="production"&&(Array.isArray(this.options.queryKey)||console.error("As of v4, queryKey needs to be an Array. If you are using a string like 'repoData', please change it to an Array, e.g. ['repoData']"));let s=new AbortController,i=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(this.#n=!0,s.signal)})},r=()=>{let a=st(this.options,e),l={queryKey:this.queryKey,meta:this.meta};return i(l),this.#n=!1,this.options.persister?this.options.persister(a,l,this):a(l)},n={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:r};i(n),this.options.behavior?.onFetch(n,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==n.fetchOptions?.meta)&&this.#r({type:"fetch",meta:n.fetchOptions?.meta});let c=a=>{it(a)&&a.silent||this.#r({type:"error",error:a}),it(a)||(this.#i.config.onError?.(a,this),this.#i.config.onSettled?.(this.state.data,a,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.#s=rt({initialPromise:e?.initialPromise,fn:n.fetchFn,abort:s.abort.bind(s),onSuccess:a=>{if(a===void 0){process.env.NODE_ENV!=="production"&&console.error(`Query data cannot be undefined. Please make sure to return a value other than undefined from your query function. Affected query key: ${this.queryHash}`),c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(a)}catch(l){c(l);return}this.#i.config.onSuccess?.(a,this),this.#i.config.onSettled?.(a,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:c,onFail:(a,l)=>{this.#r({type:"failed",failureCount:a,error:l})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:n.options.retry,retryDelay:n.options.retryDelay,networkMode:n.options.networkMode,canRun:()=>!0}),this.#s.start()}#r(t){let e=s=>{switch(t.type){case"failed":return f(o({},s),{fetchFailureCount:t.failureCount,fetchFailureReason:t.error});case"pause":return f(o({},s),{fetchStatus:"paused"});case"continue":return f(o({},s),{fetchStatus:"fetching"});case"fetch":return f(o(o({},s),gt(s.data,this.options)),{fetchMeta:t.meta??null});case"success":return o(f(o({},s),{data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success"}),!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null});case"error":let i=t.error;return it(i)&&i.revert&&this.#e?f(o({},this.#e),{fetchStatus:"idle"}):f(o({},s),{error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"});case"invalidate":return f(o({},s),{isInvalidated:!0});case"setState":return o(o({},s),t.state)}};this.state=e(this.state),d.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),this.#i.notify({query:this,type:"updated",action:t})})}};function gt(t,e){return o({fetchFailureCount:0,fetchFailureReason:null,fetchStatus:bt(e.networkMode)?"fetching":"paused"},t===void 0&&{error:null,status:"pending"})}function pe(t){let e=typeof t.initialData=="function"?t.initialData():t.initialData,s=e!==void 0,i=s?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:s?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var Jt=class extends R{constructor(t={}){super(),this.config=t,this.#t=new Map}#t;build(t,e,s){let i=e.queryKey,r=e.queryHash??G(i,e),n=this.get(r);return n||(n=new Zt({cache:this,queryKey:i,queryHash:r,options:t.defaultQueryOptions(e),state:s,defaultOptions:t.getQueryDefaults(i)}),this.add(n)),n}add(t){this.#t.has(t.queryHash)||(this.#t.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){let e=this.#t.get(t.queryHash);e&&(t.destroy(),e===t&&this.#t.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){d.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#t.get(t)}getAll(){return[...this.#t.values()]}find(t){let e=o({exact:!0},t);return this.getAll().find(s=>yt(e,s))}findAll(t={}){let e=this.getAll();return Object.keys(t).length>0?e.filter(s=>yt(t,s)):e}notify(t){d.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){d.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){d.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}};var Wt=class extends nt{#t;#e;#i;constructor(t){super(),this.mutationId=t.mutationId,this.#e=t.mutationCache,this.#t=[],this.state=t.state||Ot(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#e.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#e.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#e.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}execute(t){return I(this,null,function*(){this.#i=rt({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(i,r)=>{this.#s({type:"failed",failureCount:i,error:r})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#e.canRun(this)});let e=this.state.status==="pending",s=!this.#i.canStart();try{if(!e){this.#s({type:"pending",variables:t,isPaused:s}),yield this.#e.config.onMutate?.(t,this);let r=yield this.options.onMutate?.(t);r!==this.state.context&&this.#s({type:"pending",context:r,variables:t,isPaused:s})}let i=yield this.#i.start();return yield this.#e.config.onSuccess?.(i,t,this.state.context,this),yield this.options.onSuccess?.(i,t,this.state.context),yield this.#e.config.onSettled?.(i,null,this.state.variables,this.state.context,this),yield this.options.onSettled?.(i,null,t,this.state.context),this.#s({type:"success",data:i}),i}catch(i){try{throw yield this.#e.config.onError?.(i,t,this.state.context,this),yield this.options.onError?.(i,t,this.state.context),yield this.#e.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this),yield this.options.onSettled?.(void 0,i,t,this.state.context),i}finally{this.#s({type:"error",error:i})}}finally{this.#e.runNext(this)}})}#s(t){let e=s=>{switch(t.type){case"failed":return f(o({},s),{failureCount:t.failureCount,failureReason:t.error});case"pause":return f(o({},s),{isPaused:!0});case"continue":return f(o({},s),{isPaused:!1});case"pending":return f(o({},s),{context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()});case"success":return f(o({},s),{data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1});case"error":return f(o({},s),{data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"})}};this.state=e(this.state),d.batch(()=>{this.#t.forEach(s=>{s.onMutationUpdate(t)}),this.#e.notify({mutation:this,type:"updated",action:t})})}};function Ot(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Xt=class extends R{constructor(t={}){super(),this.config=t,this.#t=new Map,this.#e=Date.now()}#t;#e;build(t,e,s){let i=new Wt({mutationCache:this,mutationId:++this.#e,options:t.defaultMutationOptions(e),state:s});return this.add(i),i}add(t){let e=ot(t),s=this.#t.get(e)??[];s.push(t),this.#t.set(e,s),this.notify({type:"added",mutation:t})}remove(t){let e=ot(t);if(this.#t.has(e)){let s=this.#t.get(e)?.filter(i=>i!==t);s&&(s.length===0?this.#t.delete(e):this.#t.set(e,s))}this.notify({type:"removed",mutation:t})}canRun(t){let e=this.#t.get(ot(t))?.find(s=>s.state.status==="pending");return!e||e===t}runNext(t){return this.#t.get(ot(t))?.find(s=>s!==t&&s.state.isPaused)?.continue()??Promise.resolve()}clear(){d.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...this.#t.values()].flat()}find(t){let e=o({exact:!0},t);return this.getAll().find(s=>mt(e,s))}findAll(t={}){return this.getAll().filter(e=>mt(t,e))}notify(t){d.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){let t=this.getAll().filter(e=>e.state.isPaused);return d.batch(()=>Promise.all(t.map(e=>e.continue().catch(S))))}};function ot(t){return t.options.scope?.id??String(t.mutationId)}function te(t){return{onFetch:(e,s)=>{let i=()=>I(this,null,function*(){let r=e.options,n=e.fetchOptions?.meta?.fetchMore?.direction,c=e.state.data?.pages||[],a=e.state.data?.pageParams||[],l={pages:[],pageParams:[]},p=!1,u=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},v=st(e.options,e.fetchOptions),h=(g,m,O)=>I(this,null,function*(){if(p)return Promise.reject();if(m==null&&g.pages.length)return Promise.resolve(g);let y={queryKey:e.queryKey,pageParam:m,direction:O?"backward":"forward",meta:e.options.meta};u(y);let F=yield v(y),{maxPages:C}=e.options,M=O?Vt:Gt;return{pages:M(g.pages,F,C),pageParams:M(g.pageParams,m,C)}}),b;if(n&&c.length){let g=n==="backward",m=g?ye:Yt,O={pages:c,pageParams:a},y=m(r,O);b=yield h(O,y,g)}else{b=yield h(l,a[0]??r.initialPageParam);let g=t??c.length;for(let m=1;m<g;m++){let O=Yt(r,b);if(O==null)break;b=yield h(b,O)}}return b});e.options.persister?e.fetchFn=()=>e.options.persister?.(i,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s):e.fetchFn=i}}}function Yt(t,{pages:e,pageParams:s}){let i=e.length-1;return e.length>0?t.getNextPageParam(e[i],e,s[i],s):void 0}function ye(t,{pages:e,pageParams:s}){return e.length>0?t.getPreviousPageParam?.(e[0],e,s[0],s):void 0}var me=class{#t;#e;#i;#s;#o;#n;#r;#a;constructor(t={}){this.#t=t.queryCache||new Jt,this.#e=t.mutationCache||new Xt,this.#i=t.defaultOptions||{},this.#s=new Map,this.#o=new Map,this.#n=0}mount(){this.#n++,this.#n===1&&(this.#r=H.subscribe(t=>I(this,null,function*(){t&&(yield this.resumePausedMutations(),this.#t.onFocus())})),this.#a=z.subscribe(t=>I(this,null,function*(){t&&(yield this.resumePausedMutations(),this.#t.onOnline())})))}unmount(){this.#n--,this.#n===0&&(this.#r?.(),this.#r=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#t.findAll(f(o({},t),{fetchStatus:"fetching"})).length}isMutating(t){return this.#e.findAll(f(o({},t),{status:"pending"})).length}getQueryData(t){let e=this.defaultQueryOptions({queryKey:t});return this.#t.get(e.queryHash)?.state.data}ensureQueryData(t){let e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{let s=this.defaultQueryOptions(t),i=this.#t.build(this,s);return t.revalidateIfStale&&i.isStaleByTime(x(s.staleTime,i))&&this.prefetchQuery(s),Promise.resolve(e)}}getQueriesData(t){return this.#t.findAll(t).map(({queryKey:e,state:s})=>{let i=s.data;return[e,i]})}setQueryData(t,e,s){let i=this.defaultQueryOptions({queryKey:t}),n=this.#t.get(i.queryHash)?.state.data,c=Bt(e,n);if(c!==void 0)return this.#t.build(this,i).setData(c,f(o({},s),{manual:!0}))}setQueriesData(t,e,s){return d.batch(()=>this.#t.findAll(t).map(({queryKey:i})=>[i,this.setQueryData(i,e,s)]))}getQueryState(t){let e=this.defaultQueryOptions({queryKey:t});return this.#t.get(e.queryHash)?.state}removeQueries(t){let e=this.#t;d.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){let s=this.#t,i=o({type:"active"},t);return d.batch(()=>(s.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries(i,e)))}cancelQueries(t={},e={}){let s=o({revert:!0},e),i=d.batch(()=>this.#t.findAll(t).map(r=>r.cancel(s)));return Promise.all(i).then(S).catch(S)}invalidateQueries(t={},e={}){return d.batch(()=>{if(this.#t.findAll(t).forEach(i=>{i.invalidate()}),t.refetchType==="none")return Promise.resolve();let s=f(o({},t),{type:t.refetchType??t.type??"active"});return this.refetchQueries(s,e)})}refetchQueries(t={},e){let s=f(o({},e),{cancelRefetch:e?.cancelRefetch??!0}),i=d.batch(()=>this.#t.findAll(t).filter(r=>!r.isDisabled()).map(r=>{let n=r.fetch(void 0,s);return s.throwOnError||(n=n.catch(S)),r.state.fetchStatus==="paused"?Promise.resolve():n}));return Promise.all(i).then(S)}fetchQuery(t){let e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);let s=this.#t.build(this,e);return s.isStaleByTime(x(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(S).catch(S)}fetchInfiniteQuery(t){return t.behavior=te(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(S).catch(S)}resumePausedMutations(){return z.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#i}setDefaultOptions(t){this.#i=t}setQueryDefaults(t,e){this.#s.set(D(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){let e=[...this.#s.values()],s={};return e.forEach(i=>{L(t,i.queryKey)&&(s=o(o({},s),i.defaultOptions))}),s}setMutationDefaults(t,e){this.#o.set(D(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){let e=[...this.#o.values()],s={};return e.forEach(i=>{L(t,i.mutationKey)&&(s=o(o({},s),i.defaultOptions))}),s}defaultQueryOptions(t){if(t._defaulted)return t;let e=f(o(o(o({},this.#i.queries),this.getQueryDefaults(t.queryKey)),t),{_defaulted:!0});return e.queryHash||(e.queryHash=G(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===tt&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:f(o(o(o({},this.#i.mutations),t?.mutationKey&&this.getMutationDefaults(t.mutationKey)),t),{_defaulted:!0})}clear(){this.#t.clear(),this.#e.clear()}};var wt=class extends R{constructor(t,e){super(),this.options=e,this.#t=t,this.#r=null,this.bindMethods(),this.setOptions(e)}#t;#e=void 0;#i=void 0;#s=void 0;#o;#n;#r;#a;#f;#d;#c;#h;#u;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),ee(this.#e,this.options)?this.#l():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return St(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return St(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#g(),this.#O(),this.#e.removeObserver(this)}setOptions(t,e){let s=this.options,i=this.#e;if(this.options=this.#t.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof P(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#S(),this.#e.setOptions(this.options),s._defaulted&&!N(this.options,s)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});let r=this.hasListeners();r&&se(this.#e,i,this.options,s)&&this.#l(),this.updateResult(e),r&&(this.#e!==i||P(this.options.enabled,this.#e)!==P(s.enabled,this.#e)||x(this.options.staleTime,this.#e)!==x(s.staleTime,this.#e))&&this.#y();let n=this.#m();r&&(this.#e!==i||P(this.options.enabled,this.#e)!==P(s.enabled,this.#e)||n!==this.#u)&&this.#v(n)}getOptimisticResult(t){let e=this.#t.getQueryCache().build(this.#t,t),s=this.createResult(e,t);return be(this,s)&&(this.#s=s,this.#n=this.options,this.#o=this.#e.state),s}getCurrentResult(){return this.#s}trackResult(t,e){let s={};return Object.keys(t).forEach(i=>{Object.defineProperty(s,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),e?.(i),t[i])})}),s}trackProp(t){this.#p.add(t)}getCurrentQuery(){return this.#e}refetch(e={}){var t=Z(e,[]);return this.fetch(o({},t))}fetchOptimistic(t){let e=this.#t.defaultQueryOptions(t),s=this.#t.getQueryCache().build(this.#t,e);return s.isFetchingOptimistic=!0,s.fetch().then(()=>this.createResult(s,e))}fetch(t){return this.#l(f(o({},t),{cancelRefetch:t.cancelRefetch??!0})).then(()=>(this.updateResult(),this.#s))}#l(t){this.#S();let e=this.#e.fetch(this.options,t);return t?.throwOnError||(e=e.catch(S)),e}#y(){this.#g();let t=x(this.options.staleTime,this.#e);if(Q||this.#s.isStale||!_(t))return;let s=et(this.#s.dataUpdatedAt,t)+1;this.#c=setTimeout(()=>{this.#s.isStale||this.updateResult()},s)}#m(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#v(t){this.#O(),this.#u=t,!(Q||P(this.options.enabled,this.#e)===!1||!_(this.#u)||this.#u===0)&&(this.#h=setInterval(()=>{(this.options.refetchIntervalInBackground||H.isFocused())&&this.#l()},this.#u))}#b(){this.#y(),this.#v(this.#m())}#g(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#O(){this.#h&&(clearInterval(this.#h),this.#h=void 0)}createResult(t,e){let s=this.#e,i=this.options,r=this.#s,n=this.#o,c=this.#n,l=t!==s?t.state:this.#i,{state:p}=t,u=o({},p),v=!1,h;if(e._optimisticResults){let w=this.hasListeners(),B=!w&&ee(t,e),ue=w&&se(t,s,e,i);(B||ue)&&(u=o(o({},u),gt(p.data,t.options))),e._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:b,errorUpdatedAt:g,status:m}=u;if(e.select&&u.data!==void 0)if(r&&u.data===n?.data&&e.select===this.#a)h=this.#f;else try{this.#a=e.select,h=e.select(u.data),h=V(r?.data,h,e),this.#f=h,this.#r=null}catch(w){this.#r=w}else h=u.data;if(e.placeholderData!==void 0&&h===void 0&&m==="pending"){let w;if(r?.isPlaceholderData&&e.placeholderData===c?.placeholderData)w=r.data;else if(w=typeof e.placeholderData=="function"?e.placeholderData(this.#d?.state.data,this.#d):e.placeholderData,e.select&&w!==void 0)try{w=e.select(w),this.#r=null}catch(B){this.#r=B}w!==void 0&&(m="success",h=V(r?.data,w,e),v=!0)}this.#r&&(b=this.#r,h=this.#f,g=Date.now(),m="error");let O=u.fetchStatus==="fetching",y=m==="pending",F=m==="error",C=y&&O,M=h!==void 0;return{status:m,fetchStatus:u.fetchStatus,isPending:y,isSuccess:m==="success",isError:F,isInitialLoading:C,isLoading:C,data:h,dataUpdatedAt:u.dataUpdatedAt,error:b,errorUpdatedAt:g,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>l.dataUpdateCount||u.errorUpdateCount>l.errorUpdateCount,isFetching:O,isRefetching:O&&!y,isLoadingError:F&&!M,isPaused:u.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:F&&M,isStale:Ct(t,e),refetch:this.refetch}}updateResult(t){let e=this.#s,s=this.createResult(this.#e,this.options);if(this.#o=this.#e.state,this.#n=this.options,this.#o.data!==void 0&&(this.#d=this.#e),N(s,e))return;this.#s=s;let i={},r=()=>{if(!e)return!0;let{notifyOnChangeProps:n}=this.options,c=typeof n=="function"?n():n;if(c==="all"||!c&&!this.#p.size)return!0;let a=new Set(c??this.#p);return this.options.throwOnError&&a.add("error"),Object.keys(this.#s).some(l=>{let p=l;return this.#s[p]!==e[p]&&a.has(p)})};t?.listeners!==!1&&r()&&(i.listeners=!0),this.#w(o(o({},i),t))}#S(){let t=this.#t.getQueryCache().build(this.#t,this.options);if(t===this.#e)return;let e=this.#e;this.#e=t,this.#i=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#w(t){d.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#s)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function ve(t,e){return P(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function ee(t,e){return ve(t,e)||t.state.data!==void 0&&St(t,e,e.refetchOnMount)}function St(t,e,s){if(P(e.enabled,t)!==!1){let i=typeof s=="function"?s(t):s;return i==="always"||i!==!1&&Ct(t,e)}return!1}function se(t,e,s,i){return(t!==e||P(i.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&Ct(t,s)}function Ct(t,e){return P(e.enabled,t)!==!1&&t.isStaleByTime(x(e.staleTime,t))}function be(t,e){return!N(t.getCurrentResult(),e)}var Pt=class extends R{#t;#e=void 0;#i;#s;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#o()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.#t.defaultMutationOptions(t),N(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#i,observer:this}),e?.mutationKey&&this.options.mutationKey&&D(e.mutationKey)!==D(this.options.mutationKey)?this.reset():this.#i?.state.status==="pending"&&this.#i.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#i?.removeObserver(this)}onMutationUpdate(t){this.#o(),this.#n(t)}getCurrentResult(){return this.#e}reset(){this.#i?.removeObserver(this),this.#i=void 0,this.#o(),this.#n()}mutate(t,e){return this.#s=e,this.#i?.removeObserver(this),this.#i=this.#t.getMutationCache().build(this.#t,this.options),this.#i.addObserver(this),this.#i.execute(t)}#o(){let t=this.#i?.state??Ot();this.#e=f(o({},t),{isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})}#n(t){d.batch(()=>{if(this.#s&&this.hasListeners()){let e=this.#e.variables,s=this.#e.context;t?.type==="success"?(this.#s.onSuccess?.(t.data,e,s),this.#s.onSettled?.(t.data,null,e,s)):t?.type==="error"&&(this.#s.onError?.(t.error,e,s),this.#s.onSettled?.(void 0,t.error,e,s))}this.listeners.forEach(e=>{e(this.#e)})})}};function ie(t){let e={};return new Proxy(e,{get(s,i){let r=s[i];if(r)return r;let n=U(t)[i];return typeof n=="function"?n:s[i]=X(()=>t()[i])},has(s,i){return!!U(t)[i]},ownKeys(){return Reflect.ownKeys(U(t))},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}}})}function re(t,e){return typeof t=="function"?t(...e):!!t}function ge(){}function ne(t){let e=null,s=()=>{e||(e=U(()=>t()))};return queueMicrotask(()=>s()),new Proxy({},{get(i,r,n){return s(),Reflect.get(e,r,n)},has(i,r){return s(),Reflect.has(e,r)},ownKeys(){return s(),Reflect.ownKeys(e)},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}}})}function Rt(t,e,s){!e&&Et(t);let i=e??E(J);return s?T(i,s):i}function Oe(t){return function(i={}){var r=i,{injector:e}=r,s=Z(r,["injector"]);return e=Rt(this,e),T(e,()=>E(t,s))}}function Se(t,e,s={}){let{deps:i=[],multi:r=!1,extraProviders:n=[]}=s;return(c,a=!1)=>{let l;return c!==void 0?l={provide:t,useFactory:typeof c=="function"?a?()=>c:c:()=>c,multi:r}:l={provide:t,useFactory:e,deps:i,multi:r},[n,l]}}function we(t,e){let s=e?.token||new Mt(t);return[Oe(s),Se(s,()=>null,e||{}),s,()=>{}]}var oe=we("QueryClientToken"),ae=oe[0],mi=oe[1];function Ce(t,e){let s=E(J);return ne(()=>{let i=s.get(ut),r=s.get(at),n=ae({injector:s}),c=X(()=>{let u=T(s,()=>t(n)),v=n.defaultQueryOptions(u);return v._optimisticResults="optimistic",v}),a=new e(n,c()),l=ct(a.getOptimisticResult(c()));dt(()=>{let u=c();a.setOptions(u,{listeners:!1}),U(()=>{l.set(a.getOptimisticResult(u))})},{injector:s});let p=a.subscribe(d.batchCalls(u=>{i.run(()=>{if(u.isError&&!u.isFetching&&re(a.options.throwOnError,[u.error,a.getCurrentQuery()]))throw u.error;l.set(u)})}));return r.onDestroy(p),ie(l)})}function Pe(t,e){return Rt(Pe,e,()=>{let s=ae(),i=E(J),r=E(at),n=E(ut);return ne(()=>T(i,()=>{let c=new Pt(s,t(s)),a=(v,h)=>{c.mutate(v,h).catch(ge)};dt(()=>{c.setOptions(T(i,()=>t(s)))});let l=ct(c.getCurrentResult()),p=c.subscribe(d.batchCalls(v=>{n.run(()=>{if(v.isError&&re(c.options.throwOnError,[v.error]))throw v.error;l.set(v)})}));r.onDestroy(p);let u=X(()=>f(o({},l()),{mutate:a,mutateAsync:l().mutate}));return ie(u)}))})}function Re(t,e){return Rt(Re,e,()=>Ce(t,wt))}var Fe=t=>["/product",t],Ri=(()=>{class t{product=Dt.required();static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Qt({type:t,selectors:[["ecom-product-card"]],inputs:{product:[1,"product"]},standalone:!0,features:[Tt],decls:19,vars:14,consts:[[1,"flex","justify-start","cursor-pointer",3,"routerLink"],[1,"flex","flex-col","justify-center","rounded-xl","w-full","min-h-[400px]","h-full","shadow-xl"],[1,"flex","justify-center","items-center","h-full"],["width","250px",3,"src","alt"],[1,"p-5","justify-end"],[1,"text-sm"],[1,"card-title","w-full","truncate"],[1,"truncate"],[1,"badge","badge-secondary"],[1,"line-through","me-2"],[1,"me-2"]],template:function(i,r){i&1&&(A(0,"a",0)(1,"div",1)(2,"figure",2),xt(3,"img",3),q(),A(4,"div",4)(5,"div",5),k(6),q(),A(7,"h2",6)(8,"div",7),k(9),q(),A(10,"div",8),k(11,"NEW"),q()(),A(12,"div")(13,"span",9),k(14),lt(15,"currency"),q(),A(16,"span",10),k(17),lt(18,"currency"),q()()()()()),i&2&&(ht("routerLink",jt(12,Fe,r.product().publicId)),j(3),At("alt",r.product().name),ht("src","data:"+r.product().pictures[0].mimeType+";base64,"+r.product().pictures[0].file,It),j(3),W(r.product().brand),j(3),qt("",r.product().name," - ",r.product().size,""),j(5),W(ft(15,8,r.product().price+200)),j(3),W(ft(18,10,r.product().price)))},dependencies:[Ut,kt,Nt]})}return t})();export{Y as a,K as b,Te as c,me as d,ae as e,mi as f,Pe as g,Re as h,Ri as i};
