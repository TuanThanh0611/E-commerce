import { DOMStringListMock } from '../classes/dom-string-list-mock';
import { SSR_LOCATION } from '../tokens/ssr-location';
import { emptyFunction } from './functions';
export function provideLocation(req) {
    const protocol = 'encrypted' in req.socket ? 'https' : 'http';
    const url = new URL(`${protocol}://${req.headers.host}${req.url}`);
    url.assign = emptyFunction;
    url.reload = emptyFunction;
    url.replace = emptyFunction;
    url.ancestorOrigins = new DOMStringListMock();
    return {
        provide: SSR_LOCATION,
        useValue: url,
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvdmlkZS1sb2NhdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2xpYnMvdW5pdmVyc2FsL3NyYy91dGlscy9wcm92aWRlLWxvY2F0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUlBLE9BQU8sRUFBQyxpQkFBaUIsRUFBQyxNQUFNLGlDQUFpQyxDQUFDO0FBQ2xFLE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSx3QkFBd0IsQ0FBQztBQUNwRCxPQUFPLEVBQUMsYUFBYSxFQUFDLE1BQU0sYUFBYSxDQUFDO0FBRTFDLE1BQU0sVUFBVSxlQUFlLENBQUMsR0FBb0I7SUFDaEQsTUFBTSxRQUFRLEdBQUcsV0FBVyxJQUFJLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO0lBQzlELE1BQU0sR0FBRyxHQUFRLElBQUksR0FBRyxDQUFDLEdBQUcsUUFBUSxNQUFNLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBRXhFLEdBQUcsQ0FBQyxNQUFNLEdBQUcsYUFBYSxDQUFDO0lBQzNCLEdBQUcsQ0FBQyxNQUFNLEdBQUcsYUFBYSxDQUFDO0lBQzNCLEdBQUcsQ0FBQyxPQUFPLEdBQUcsYUFBYSxDQUFDO0lBQzVCLEdBQUcsQ0FBQyxlQUFlLEdBQUcsSUFBSSxpQkFBaUIsRUFBRSxDQUFDO0lBRTlDLE9BQU87UUFDSCxPQUFPLEVBQUUsWUFBWTtRQUNyQixRQUFRLEVBQUUsR0FBRztLQUNoQixDQUFDO0FBQ04sQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHtJbmNvbWluZ01lc3NhZ2V9IGZyb20gJ25vZGU6aHR0cCc7XG5cbmltcG9ydCB0eXBlIHtWYWx1ZVByb3ZpZGVyfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHtET01TdHJpbmdMaXN0TW9ja30gZnJvbSAnLi4vY2xhc3Nlcy9kb20tc3RyaW5nLWxpc3QtbW9jayc7XG5pbXBvcnQge1NTUl9MT0NBVElPTn0gZnJvbSAnLi4vdG9rZW5zL3Nzci1sb2NhdGlvbic7XG5pbXBvcnQge2VtcHR5RnVuY3Rpb259IGZyb20gJy4vZnVuY3Rpb25zJztcblxuZXhwb3J0IGZ1bmN0aW9uIHByb3ZpZGVMb2NhdGlvbihyZXE6IEluY29taW5nTWVzc2FnZSk6IFZhbHVlUHJvdmlkZXIge1xuICAgIGNvbnN0IHByb3RvY29sID0gJ2VuY3J5cHRlZCcgaW4gcmVxLnNvY2tldCA/ICdodHRwcycgOiAnaHR0cCc7XG4gICAgY29uc3QgdXJsOiBhbnkgPSBuZXcgVVJMKGAke3Byb3RvY29sfTovLyR7cmVxLmhlYWRlcnMuaG9zdH0ke3JlcS51cmx9YCk7XG5cbiAgICB1cmwuYXNzaWduID0gZW1wdHlGdW5jdGlvbjtcbiAgICB1cmwucmVsb2FkID0gZW1wdHlGdW5jdGlvbjtcbiAgICB1cmwucmVwbGFjZSA9IGVtcHR5RnVuY3Rpb247XG4gICAgdXJsLmFuY2VzdG9yT3JpZ2lucyA9IG5ldyBET01TdHJpbmdMaXN0TW9jaygpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHJvdmlkZTogU1NSX0xPQ0FUSU9OLFxuICAgICAgICB1c2VWYWx1ZTogdXJsLFxuICAgIH07XG59XG4iXX0=